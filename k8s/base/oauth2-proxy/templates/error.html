{{ define "error" }}
<!DOCTYPE html>
<html lang="en" class="h-full" data-theme>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ .Title }} | Cat Herding Access</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      const storedTheme = localStorage.getItem("ch-auth-theme");
      const systemDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
      const theme = storedTheme || (systemDark ? "dark" : "light");
      document.documentElement.dataset.theme = theme;
      document.documentElement.classList.toggle("dark", theme === "dark");
    </script>
    <style>
      :root[data-theme="light"] {
        color-scheme: light;
      }
      :root[data-theme="dark"] {
        color-scheme: dark;
      }
    </style>
  </head>
  <body class="flex min-h-screen items-center justify-center bg-slate-50 px-6 py-12 text-slate-900 dark:bg-slate-950 dark:text-slate-100">
    <div class="w-full max-w-xl rounded-3xl border border-red-200/70 bg-white/90 p-10 text-center shadow-2xl backdrop-blur dark:border-red-500/40 dark:bg-slate-900/70">
      <div class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-red-500/10 text-3xl text-red-500 dark:bg-red-500/20">⚠️</div>
      <h1 class="mt-6 text-3xl font-semibold">{{ .Title }}</h1>
      <p class="mt-3 text-base text-slate-600 dark:text-slate-300">{{ .Message }}</p>

      {{ if .RedirectURL }}
      <p class="mt-4 text-sm text-slate-500 dark:text-slate-400">
        <a href="{{ .RedirectURL }}" class="font-semibold text-violet-500 hover:text-violet-400">Retry authentication</a>
      </p>
      {{ end }}

      <div class="mt-8 rounded-2xl bg-slate-100/80 p-6 text-left text-sm text-slate-600 dark:bg-slate-800/80 dark:text-slate-300">
        <p class="font-semibold text-slate-800 dark:text-white">Diagnostic details</p>
        <dl class="mt-3 space-y-2">
          <div class="flex items-center justify-between gap-3">
            <dt class="text-slate-500 dark:text-slate-400">Request ID</dt>
            <dd class="font-mono text-xs">{{ .RequestID }}</dd>
          </div>
          <div class="flex items-center justify-between gap-3">
            <dt class="text-slate-500 dark:text-slate-400">Timestamp</dt>
            <dd class="font-mono text-xs">{{ .Timestamp }}</dd>
          </div>
          <div class="flex items-center justify-between gap-3">
            <dt class="text-slate-500 dark:text-slate-400">Proxy Prefix</dt>
            <dd class="font-mono text-xs">{{ .ProxyPrefix }}</dd>
          </div>
        </dl>
      </div>

      <div class="mt-8 text-sm text-slate-500 dark:text-slate-400">
        Still stuck? Email <a href="mailto:security@cat-herding.net" class="font-semibold text-violet-500 hover:text-violet-400">security@cat-herding.net</a> with the request ID above.
      </div>
    </div>
  </body>
</html>
{{ end }}
